<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LiftLab</title>

  <link rel="icon" href="https://plus.unsplash.com/premium_photo-1664298367434-0408974ab0bb?fm=jpg&q=60&w=3000">
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo" id="logoHome">üèãÔ∏è LiftLab</div>
  <div class="nav-buttons">
    <button id="loginBtnNav" class="nav-btn">Login</button>
    <button id="signupBtnNav" class="nav-btn outline">Sign Up</button>
    <button id="logoutBtnNav" class="nav-btn logout" style="display:none;">Logout</button>
  </div>
</nav>

<!-- ================= HOME PAGE ================= -->
<div id="homePage">

  <!-- HERO -->
  <section class="hero">
    <div class="hero-overlay">
      <h1>Train Smarter. Lift Stronger.</h1>
      <p>Modern strength training for schools</p>
    </div>
  </section>

  <!-- INFO CARDS -->
  <section class="info">
    <div class="info-card">
      <img src="https://picsum.photos/300/200?1">
      <h3>Structured Programs</h3>
      <p>Instructor-built workouts with schedules.</p>
    </div>
    <div class="info-card">
      <img src="https://picsum.photos/300/200?2">
      <h3>Exercise Videos</h3>
      <p>Watch exactly how each lift is performed.</p>
    </div>
    <div class="info-card">
      <img src="https://picsum.photos/300/200?3">
      <h3>Track Progress</h3>
      <p>Log sets, reps, and weights easily.</p>
    </div>
  </section>

  <!-- ZIGZAG INFO -->
  <section class="info-zigzag">

    <div class="info-row reveal reveal-left">
      <div class="info-text">
        <h2>Built for School Weight Rooms</h2>
        <p>Structured, progressive programs designed for students.</p>
        <p>Safe. Organized. Effective.</p>
      </div>
      <div class="info-image">
        <img src="https://picsum.photos/600/400?strength1">
      </div>
    </div>

    <div class="info-row reverse reveal reveal-right">
      <div class="info-text">
        <h2>Video-Guided Exercises</h2>
        <p>Clear demonstrations for every movement.</p>
        <p>No confusion. No bad form.</p>
      </div>
      <div class="info-image">
        <img src="https://picsum.photos/600/400?strength2">
      </div>
    </div>

    <div class="info-row reveal reveal-left">
      <div class="info-text">
        <h2>Track Progress Over Time</h2>
        <p>Students log sets, reps, and weights.</p>
        <p>Instructors monitor trends.</p>
      </div>
      <div class="info-image">
        <img src="https://picsum.photos/600/400?strength3">
      </div>
    </div>

  </section>

  <!-- CTA -->
  <section class="cta-section reveal">
    <div class="cta-content">
      <h2>Bring Structure to Your Weight Room</h2>
      <p>Everything students and instructors need ‚Äî in one platform.</p>
      <button id="ctaGetStarted" class="cta-btn">Get Started</button>
    </div>
  </section>

</div>

<!-- ================= AUTH PAGE ================= -->
<div id="authPage" style="display:none; min-height:100vh; padding-top:140px;">

  <section class="card auth-card">
    <h2>Login / Sign Up</h2>

    <input type="text" id="fullName" placeholder="Full Name">

    <input type="email" id="email" placeholder="School Email">
    <input type="password" id="password" placeholder="Password">

<select id="roleSelect">
  <option value="student">Student</option>
  <option value="instructor">Instructor</option>
</select>

    <button id="loginBtn">Login</button>
    <button id="signupBtn" class="outline">Sign Up</button>

    <button id="backHomeBtn" class="nav-btn outline" style="margin-top:20px;">
      ‚Üê Back to Home
    </button>
  </section>

</div>

<!-- ================= DASHBOARD ================= -->
<!--Student Side-->
<section class="card" id="studentSection" style="display:none;">

  <h2 class="big-header">Join a Class</h2>

  <input id="joinClassId" placeholder="Enter Class ID">
  <button id="joinClassBtn">Join Class</button>

  <p id="joinStatus"></p>

  <hr>

  <h2 id="studentClassTitle" style="display:none;"></h2>

  <div id="studentWorkoutList"></div>

  <hr>

  <h3>Comments for Instructor</h3>
  <textarea id="commentText" placeholder="Ask a question or leave feedback"></textarea>
  <button id="postCommentBtn">Post Comment</button>

  <div id="commentStatus"></div>

</section>

<section id="dashboard" style="display:none; padding-top:140px;">
  <section class="card" id="instructorSection" style="display:none;">


    <center><h2>Instructor Dashboard</h2></center>
    

    
    <input type="text" id="className" placeholder="Class Name (e.g. Period 3 Strength)">
<button id="createClassBtn">Create Class</button>

<p id="classStatus"></p>
<h3>Create Workout</h3>

<input id="workoutTitle" placeholder="Workout Name">

<input id="exerciseName" placeholder="Exercise Name">
<input id="sets" type="number" placeholder="Sets">
<input id="reps" type="number" placeholder="Reps">
<input id="videoUrl" placeholder="Exercise Video URL">

<select id="classSelect">
  <option value="">Save for later (no class)</option>
</select>

<button id="saveWorkoutBtn">Save Workout</button>

<p id="workoutStatus"></p>

<hr>

<h3>Your Workouts</h3>
<div id="workoutList"></div>

<hr>

<h3>Your Classes</h3>
<div id="classList"></div>

  </section>
</section>




<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-contact">
      <h4>LiftLab HQ</h4>
      <p>123 Strength Ave, Columbus, OH</p>
      <p>Email: support@liftlab.org</p>
    </div>
    <div class="footer-links">
      <p>¬© 2026 LiftLab</p>
    </div>
  </div>
</footer>

<!-- ================= SCRIPT ================= -->
<script type="module">

/* PAGE SWITCHING */
const homePage = document.getElementById("homePage");
const authPage = document.getElementById("authPage");
const dashboard = document.getElementById("dashboard");

function showAuthPage() {
  homePage.style.display = "none";
  dashboard.style.display = "none";
  authPage.style.display = "block";
  navbar.classList.add("auth-nav");
  window.scrollTo(0,0);
}

function showHomePage() {
  authPage.style.display = "none";
  dashboard.style.display = "none";
  homePage.style.display = "block";
  navbar.classList.remove("auth-nav");
  window.scrollTo(0,0);
}


const logoHome = document.getElementById("logoHome");

logoHome.addEventListener("click", () => {
  showHomePage();
});


/* NAV BUTTONS */
loginBtnNav.onclick = showAuthPage;
signupBtnNav.onclick = showAuthPage;
ctaGetStarted.onclick = showAuthPage;
backHomeBtn.onclick = showHomePage;

/* FIREBASE */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";


const firebaseConfig = {
  apiKey: "AIzaSyDt8d3VKJcAeyFMMzfiT93mdwLiWYNxzx4",
  authDomain: "weightlifting-app-3c288.firebaseapp.com",
  projectId: "weightlifting-app-3c288",
  storageBucket: "weightlifting-app-3c288.firebasestorage.app",
  messagingSenderId: "410023900029",
  appId: "1:410023900029:web:9684c383341bfd2e075214"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* AUTH */
loginBtn.onclick = async () => {
  await signInWithEmailAndPassword(auth, email.value, password.value);
};


const fullName = document.getElementById("fullName");
const roleSelect = document.getElementById("roleSelect");

signupBtn.onclick = async () => {
  const cred = await createUserWithEmailAndPassword(
    auth,
    email.value,
    password.value
  );

  await setDoc(doc(db, "users", cred.user.uid), {
    name: fullName.value,
    email: email.value,
    role: roleSelect.value
  });
};



logoutBtnNav.onclick = () => signOut(auth);

/* AUTH STATE */
onAuthStateChanged(auth, async (user) => {
  if (user) {
    loginBtnNav.style.display = "none";
    signupBtnNav.style.display = "none";
    logoutBtnNav.style.display = "inline-block";
    

    homePage.style.display = "none";
    authPage.style.display = "none";
    dashboard.style.display = "block";

    const snap = await getDoc(doc(db, "users", user.uid));
    const role = snap.data().role;
    

  instructorSection.style.display = role === "instructor" ? "block" : "none";
  studentSection.style.display = role === "student" ? "block" : "none";

  } else {
    logoutBtnNav.style.display = "none";
    loginBtnNav.style.display = "inline-block";
    signupBtnNav.style.display = "inline-block";
    showHomePage();
  }
});

/* NAVBAR SCROLL EFFECT */
const navbar = document.querySelector(".navbar");
window.addEventListener("scroll", () => {
  navbar.classList.toggle("scrolled", window.scrollY > 40);
});

/* REVEALS */
const reveals = document.querySelectorAll(".reveal");
window.addEventListener("scroll", () => {
  reveals.forEach(el => {
    if (el.getBoundingClientRect().top < window.innerHeight - 120) {
      el.classList.add("active");
    }
  });
});

/* CREATE CLASS */
const classNameInput = document.getElementById("className");
const createClassBtn = document.getElementById("createClassBtn");
const classStatus = document.getElementById("classStatus");

createClassBtn.addEventListener("click", async () => {
  const className = classNameInput.value.trim();
  const user = auth.currentUser;

  if (!className) {
    alert("Enter a class name");
    return;
  }

  try {
    const classRef = await addDoc(collection(db, "classes"), {
      name: className,
      instructorId: user.uid,
      createdAt: serverTimestamp()
    });

classStatus.textContent = `Class "${classNameInput.value}" created`;

    // Save classId to instructor user profile
    await setDoc(doc(db, "users", user.uid), {
      classId: classRef.id
    }, { merge: true });

  } catch (error) {
    alert(error.message);
  }
});

import { updateDoc, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

joinClassBtn.onclick = async () => {
  const classId = joinClassId.value.trim();
  const user = auth.currentUser;

  if (!classId) return;

  try {
    const classRef = doc(db, "classes", classId);
    const classSnap = await getDoc(classRef);

    if (!classSnap.exists()) {
      joinStatus.textContent = "Class not found";
      return;
    }

    await updateDoc(doc(db, "users", user.uid), {
      joinedClass: classId
    });

    joinStatus.textContent = "Joined class!";
    loadStudentClass(classId);

  } catch (err) {
    joinStatus.textContent = err.message;
  }
};

async function loadStudentClass(classId) {
  const classSnap = await getDoc(doc(db, "classes", classId));
  studentClassTitle.style.display = "block";
  studentClassTitle.textContent = classSnap.data().name;

  studentWorkoutList.innerHTML = "";

  const q = query(
    collection(db, "workouts"),
    where("classId", "==", classId)
  );

  const snap = await getDocs(q);
  snap.forEach(docu => {
    const w = docu.data();
    studentWorkoutList.innerHTML += `
      <div class="workout-card">
        <h4>${w.title}</h4>
        <p>${w.exercise} ‚Äî ${w.sets}x${w.reps}</p>
      </div>
    `;
  });
}

postCommentBtn.onclick = async () => {
  const user = auth.currentUser;
  const text = commentText.value;

  if (!text) return;

  const userSnap = await getDoc(doc(db, "users", user.uid));

  await addDoc(collection(db, "comments"), {
    classId: userSnap.data().joinedClass,
    userId: user.uid,
    userName: userSnap.data().name,
    text,
    createdAt: serverTimestamp()
  });

  commentText.value = "";
  commentStatus.textContent = "Comment sent!";
};


</script>

</body>
</html>
